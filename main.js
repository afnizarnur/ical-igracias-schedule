(function(){var e,a,t,r,n,i,o,s;t=require("./config"),i=require("ical-generator"),n=require("http"),s=require("url"),o=require("request"),e=i({domain:"afnizarnur.com",name:"Jadwal Kuliah",timezone:"Asia/Jakarta",prodId:{company:"afnizarnur.com",product:"ical-igracias-schedule"}}),a=function(e,a){return e.split(":")[a]},r=function(){return s="https://dashboard.telkomuniversity.ac.id/Modul/apimobile/dataAkademikMahasiswa/getDataAkademikMahasiswa.php?data=jadwal&nim="+t.NIM,o({url:s,json:!0},function(t,r,n){var i,o,s,u,c,l,d,g,m,h;if(!t&&200===r.statusCode)for(d=n[0][0],c=0,l=d.length;c<l;c++)h=d[c],m=new Date,m.setDate(m.getDate()+(8-m.getDay())%7),1!==h.dayid&&m.setDate(m.getDate()+(h.dayid-m.getDay())%7),g=h.starthour,s=h.startend,o=new Date(m.getFullYear(),m.getMonth(),m.getDate(),a(g,0),a(g,1),a(g,2)),i=new Date(m.getFullYear(),m.getMonth(),m.getDate(),a(s,0),a(s,1),a(s,2)),u=e.createEvent({start:o,end:i,summary:h.roomname+" - "+h.subjectname,description:"Kode Dosen "+h.lecturecode,location:h.roomname}),u.repeating({freq:"WEEKLY"})})},r(),n.createServer(function(a,t){e.serve(t)}).listen(3e3,"127.0.0.1",function(){console.log("Generate .ical / calendar files from your iGracias schedule in easy way!"),console.log("Server running at http://127.0.0.1:3000/")})}).call(this);